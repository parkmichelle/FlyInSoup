<html>

  <head>
    <script src='https://d3js.org/d3.v5.min.js'></script>
    <script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
    <script src="https://d3js.org/d3-selection.v1.min.js"></script>
    <script src="https://d3js.org/d3-drag.v1.min.js"></script>
  </head>

  <body>
    <svg id='vis'></svg>

    <script>
      // Set up size
      var mapWidth = 1000; var mapHeight = 750;

      // Set up projection that the map is using 
      var scale = 190000;
      var projection = d3.geoMercator()
                         .center([-122.061578, 37.385532])
                         .scale(scale)
                         .translate([mapWidth / 2, mapHeight / 2]);

      // This is the mapping between <longitude, latitude> position to <x, y> pixel position on the map
      // projection is a function and it has an inverse:
      // projection([lon, lat]) returns [x, y]
      // projection.invert([x, y]) returns [lon, lat]
      // Add an SVG element to the DOM
      var svg = d3.select('body').append('svg')
                  .attr('width', mapWidth)
                  .attr('height', mapHeight);
                  // Add SVG map at correct size, assuming map is saved in a subdirectory called `data`
      svg.append('image')
         .attr('width', mapWidth)
         .attr('height', mapHeight)
         .attr('xlink:href', 'media/map.svg');

      // Read in data
      d3.csv('data/data.csv', function(d) {
        return {
          name: d.Name, // + to turn into numbers
          grade: d.Grade, // no + because want to remain str
          score: +d.Score,
          latitude: +d.Latitude,
          longitude: +d.Longitude,
          address: d.Adress
        };
      }).then(function(data) {
        // do something with the data
        console.log(data);
      });
    </script>

  </body>

<html/>
